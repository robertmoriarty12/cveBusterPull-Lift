# cveBuster API Documentation - Setup Guide

## Quick Start

### Windows
```powershell
cd C:\GitHub\Azure-Sentinel\Solutions\cveBuster Vulnerability Scanning\Server\api_docs
python server.py
```

Then open your browser to: **http://localhost**

### Linux/Ubuntu
```bash
cd /path/to/cveBuster/api_docs
sudo python3 server.py
# or without sudo on a different port:
PORT=8000 python3 server.py
# or using the bash script:
sudo bash server.sh
```

Then open your browser to: **http://localhost**

---

## Files Included

### Documentation Files
- **index.html** - Professional API documentation webpage
- **README.md** - Documentation folder information

### Server Files
- **server.py** - Windows/General Python server
- **server_linux.py** - Linux-optimized Python server  
- **server.sh** - Bash script for easy Linux deployment

---

## Installation & Hosting on Ubuntu Server

### Step 1: Copy Files to Your Ubuntu Server

```bash
# Option A: Using SCP
scp -r "C:\GitHub\Azure-Sentinel\Solutions\cveBuster Vulnerability Scanning\Server\api_docs" user@your-server:/path/to/docs

# Option B: Using git clone or rsync
rsync -avz api_docs/ user@your-server:/path/to/docs/
```

### Step 2: Make Scripts Executable

```bash
ssh user@your-server
cd /path/to/api_docs

# Make scripts executable
chmod +x server.sh
chmod +x server_linux.py
```

### Step 3: Start the Server

**Option A: Using the bash script (simplest)**
```bash
sudo bash server.sh
```

**Option B: Using Python directly**
```bash
sudo python3 server.py
```

**Option C: Using Python on a different port (no sudo needed)**
```bash
PORT=8000 python3 server.py
# Then access at http://localhost:8000
```

### Step 4: Access the Documentation

Open your browser and navigate to:
```
http://your-server-ip:80
```

Or if using port 8000:
```
http://your-server-ip:8000
```

---

## Permanent Service Setup (systemd)

To run the documentation server as a permanent service on Ubuntu:

### Create a systemd service file:

```bash
sudo nano /etc/systemd/system/cvebuster-docs.service
```

### Paste the following content:

```ini
[Unit]
Description=cveBuster API Documentation Server
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/api_docs
ExecStart=/usr/bin/python3 /path/to/api_docs/server.py
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

### Enable and start the service:

```bash
sudo systemctl daemon-reload
sudo systemctl enable cvebuster-docs
sudo systemctl start cvebuster-docs

# Check status
sudo systemctl status cvebuster-docs

# View logs
sudo journalctl -u cvebuster-docs -f
```

---

## Docker (Optional)

If you prefer to use Docker:

### Create a Dockerfile:

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY index.html /app/
COPY server_linux.py /app/

RUN chmod +x /app/server_linux.py

EXPOSE 80

CMD ["python3", "/app/server_linux.py"]
```

### Build and run:

```bash
docker build -t cvebuster-docs .
docker run -p 80:80 cvebuster-docs
```

---

## Using with Nginx (Reverse Proxy)

If you already have Nginx running:

### 1. Create Nginx config:

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 2. Enable the config:

```bash
sudo ln -s /etc/nginx/sites-available/cvebuster-docs /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 3. Start the docs server:

```bash
PORT=8000 python3 server.py
```

---

## Troubleshooting

### Issue: Permission Denied on Port 80

**Solution:** Use sudo or a port > 1024
```bash
# With sudo:
sudo python3 server.py

# Without sudo (on port 8000):
PORT=8000 python3 server.py
```

### Issue: Address Already in Use

**Solution:** Either kill the process or use a different port
```bash
# Find process on port 80:
sudo lsof -i :80

# Kill it:
sudo kill -9 <PID>

# Or use a different port:
PORT=8001 python3 server.py
```

### Issue: Can't Access from Remote Machine

**Solution:** Check firewall rules
```bash
# Allow port 80 through firewall:
sudo ufw allow 80/tcp

# Or check if firewall is running:
sudo ufw status
```

---

## Customizing the Documentation

Edit `index.html` to customize:

- **Colors & Styling** - Look for the `<style>` section (lines ~10-400)
- **API Base URL** - Update in the "Overview" section
- **Navigation Links** - Edit the sidebar nav section
- **Examples & Content** - Add or modify any documentation section

### Common customizations:

1. **Change colors:**
   - Find `.sidebar { background-color: #2c3e50; }` and modify the hex color
   
2. **Add new API endpoint:**
   - Duplicate an endpoint block and modify the parameters
   
3. **Update API Key:**
   - Replace all instances of `cvebuster-demo-key-12345`

---

## Support

For issues or questions:
1. Check the troubleshooting section above
2. Review server logs: `sudo journalctl -u cvebuster-docs -f`
3. Verify files are in the correct directory
4. Ensure Python 3 is installed: `python3 --version`

---

## Next Steps

1. âœ… Copy the api_docs folder to your Ubuntu server
2. âœ… Make scripts executable
3. âœ… Start the server
4. âœ… Access via browser
5. âœ… (Optional) Set up systemd service for permanence

Your API documentation is now live! ðŸš€
